<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaçš„2026å¹´1æœˆè¡ŒåŠ¨æ¸…å• âœ¨ - å¢å¼ºç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .task-card {
            transition: all 0.3s ease;
        }
        
        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .checkbox-custom {
            appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid #d1d5db;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .checkbox-custom:checked {
            background-color: #10b981;
            border-color: #10b981;
            background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
        }
        
        .battery-indicator {
            width: 100px;
            height: 30px;
            border: 2px solid #374151;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }
        
        .battery-fill {
            height: 100%;
            transition: width 0.5s ease, background-color 0.5s ease;
        }
        
        .battery-tip {
            width: 4px;
            height: 16px;
            background-color: #374151;
            position: absolute;
            right: -6px;
            top: 7px;
            border-radius: 0 2px 2px 0;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            background-color: #10b981;
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
            z-index: 2000;
        }
        
        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div id="toast" class="toast"></div>
    <div id="root"></div>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.backgroundColor = type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6';
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // é»˜è®¤æ•°æ®ç»“æ„
        const DEFAULT_WEEKS = [
            {
                id: 'week1',
                name: 'Week 1-2 (1/1-1/12): æ¢å¤ + è§„åˆ’',
                dates: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                focus: ['å¥åº·é‡å»º', 'Startupå‡†å¤‡', 'å…³é—­æ—§å¾ªç¯']
            },
            {
                id: 'week3',
                name: 'Week 3-4 (1/13-1/31): å¯åŠ¨ + ç§¯ç´¯',
                dates: [13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31],
                focus: ['Researché¡¹ç›®', 'AIè½¯ä»¶å¼€å‘', 'Networking']
            }
        ];

        const DEFAULT_DAILY_ROUTINES = [
            { id: 'morning-sun', text: 'â˜€ï¸ æ™¨é—´é˜³å…‰15åˆ†é’Ÿ', category: 'health' },
            { id: 'morning-nutrition', text: 'ğŸ¥¤ è›‹ç™½ç²‰ + Omega-3 + Bç»´ç”Ÿç´ ', category: 'health' },
            { id: 'morning-exercise', text: 'ğŸƒ 30åˆ†é’Ÿè¿åŠ¨/ç‘œä¼½', category: 'health' },
            { id: 'emotion-checkin', text: 'ğŸ’­ æƒ…ç»ªcheck-inï¼ˆç”µæ± %ï¼Ÿï¼‰', category: 'mental' },
            { id: 'evening-journal', text: 'ğŸ“” æ™šé—´æ—¥è®° + æ„Ÿæ©', category: 'mental' },
            { id: 'evening-stark', text: 'ğŸ“ å’ŒStarkåˆ†äº«ä»Šå¤©', category: 'social' },
            { id: 'evening-sleep', text: 'ğŸ˜´ 10:30åæ— å±å¹• + 4-7-8å‘¼å¸', category: 'health' }
        ];

        const DEFAULT_WEEKLY_TASKS = [
            { week: 'all', text: 'ğŸ¸ ç¾½æ¯›çƒ 2æ¬¡', count: 2, category: 'health' },
            { week: 'all', text: 'ğŸ’ª å¥èº«æˆ¿ 1æ¬¡', count: 1, category: 'health' },
            { week: 'week1', text: 'ğŸ“ å®ŒæˆSandyçš„broker case', category: 'work' },
            { week: 'week1', text: 'ğŸ“š ç ”ç©¶RÃ³isÃ­n McNaneyçš„è®ºæ–‡', category: 'career' },
            { week: 'week3', text: 'ğŸ”— LinkedInæ–°å¢10ä¸ªconnections', category: 'networking' },
            { week: 'week3', text: 'ğŸ’» AIå¼€å‘ 6å°æ—¶ï¼ˆå‘¨ä¸€ä¸‰äº”å„2hï¼‰', category: 'startup' },
            { week: 'week3', text: 'ğŸ“– Knowledge input 4å°æ—¶ï¼ˆå‘¨äºŒå››å„2hï¼‰', category: 'learning' },
            { week: 'all', text: 'ğŸª å‘¨æ—¥æ™šé—´reflection', category: 'reflection' }
        ];

        const DEFAULT_SPECIAL_EVENTS = [
            { date: 2, text: 'ğŸ§˜ å®ŒæˆMindSpotç„¦è™‘è¯„ä¼°', category: 'mental-health' },
            { date: 5, text: 'ğŸ¯ UWA Startupä¼šè®® - å‡†å¤‡pitch', category: 'startup', priority: true },
            { date: 10, text: 'ğŸ“ LaunchLab AIç”³è¯·æˆªæ­¢', category: 'startup', priority: true },
            { date: 11, text: 'ğŸ“š æ·±å…¥ç ”ç©¶RÃ³isÃ­n McNaneyå·¥ä½œ', category: 'career' },
            { date: 12, text: 'ğŸ’¼ å®ŒæˆSandy broker caseæœ€ç»ˆæäº¤', category: 'work', priority: true },
            { date: 13, text: 'ğŸ§  UWA Counsellingåˆæ¬¡å’¨è¯¢', category: 'mental-health', priority: true },
            { date: 14, text: 'âš™ï¸ ç¡®å®šAIè½¯ä»¶æŠ€æœ¯æ ˆ', category: 'startup' },
            { date: 18, text: 'ğŸŒ¸ å¼ºåˆ¶ä¼‘æ¯æ—¥ - ç”µæ± å……ç”µ', category: 'rest', priority: true },
            { date: 21, text: 'ğŸ¤ Toastmastersä¼šè®®', category: 'skill' },
            { date: 24, text: 'ğŸ“‹ PWdWAå®ä¹ å‡†å¤‡', category: 'internship' },
            { date: 26, text: 'ğŸŒ¸ å¼ºåˆ¶ä¼‘æ¯æ—¥ - Australia Day', category: 'rest', priority: true },
            { date: 28, text: 'ğŸ“© å‘RÃ³isÃ­n McNaneyå‘LinkedInè¯·æ±‚', category: 'networking', priority: true },
            { date: 31, text: 'ğŸ¯ MVP Demoå®Œæˆ + 1æœˆæ€»ç»“', category: 'milestone', priority: true }
        ];

        function App() {
            const [currentDate, setCurrentDate] = useState(new Date().getDate() <= 31 ? new Date().getDate() : 1);
            const [dailyChecks, setDailyChecks] = useState({});
            const [weeklyProgress, setWeeklyProgress] = useState({});
            const [specialCompleted, setSpecialCompleted] = useState({});
            const [batteryLevel, setBatteryLevel] = useState(60);
            const [notes, setNotes] = useState({});
            const [loading, setLoading] = useState(true);
            
            // å¯è‡ªå®šä¹‰çš„æ•°æ®
            const [dailyRoutines, setDailyRoutines] = useState(DEFAULT_DAILY_ROUTINES);
            const [weeklyTasks, setWeeklyTasks] = useState(DEFAULT_WEEKLY_TASKS);
            const [specialEvents, setSpecialEvents] = useState(DEFAULT_SPECIAL_EVENTS);
            
            // Modal states
            const [showAddTaskModal, setShowAddTaskModal] = useState(false);
            const [showAddEventModal, setShowAddEventModal] = useState(false);
            const [showImportExportModal, setShowImportExportModal] = useState(false);
            const [newTask, setNewTask] = useState({ text: '', category: 'custom' });
            const [newEvent, setNewEvent] = useState({ date: currentDate, text: '', category: 'custom', priority: false });

            // ä»storageåŠ è½½æ•°æ®
            useEffect(() => {
                loadData();
            }, []);

            const loadData = async () => {
                try {
                    const dailyResult = await window.storage.get('eva-jan-daily');
                    const weeklyResult = await window.storage.get('eva-jan-weekly');
                    const specialResult = await window.storage.get('eva-jan-special');
                    const notesResult = await window.storage.get('eva-jan-notes');
                    const batteryResult = await window.storage.get('eva-jan-battery');
                    
                    // åŠ è½½è‡ªå®šä¹‰æ•°æ®
                    const routinesResult = await window.storage.get('eva-jan-routines');
                    const tasksResult = await window.storage.get('eva-jan-tasks');
                    const eventsResult = await window.storage.get('eva-jan-events');
                    
                    if (dailyResult?.value) setDailyChecks(JSON.parse(dailyResult.value));
                    if (weeklyResult?.value) setWeeklyProgress(JSON.parse(weeklyResult.value));
                    if (specialResult?.value) setSpecialCompleted(JSON.parse(specialResult.value));
                    if (notesResult?.value) setNotes(JSON.parse(notesResult.value));
                    if (batteryResult?.value) setBatteryLevel(JSON.parse(batteryResult.value));
                    
                    if (routinesResult?.value) setDailyRoutines(JSON.parse(routinesResult.value));
                    if (tasksResult?.value) setWeeklyTasks(JSON.parse(tasksResult.value));
                    if (eventsResult?.value) setSpecialEvents(JSON.parse(eventsResult.value));
                } catch (error) {
                    console.log('First time loading, starting fresh');
                }
                setLoading(false);
            };

            const saveData = async () => {
                try {
                    await window.storage.set('eva-jan-daily', JSON.stringify(dailyChecks));
                    await window.storage.set('eva-jan-weekly', JSON.stringify(weeklyProgress));
                    await window.storage.set('eva-jan-special', JSON.stringify(specialCompleted));
                    await window.storage.set('eva-jan-notes', JSON.stringify(notes));
                    await window.storage.set('eva-jan-battery', JSON.stringify(batteryLevel));
                    
                    // ä¿å­˜è‡ªå®šä¹‰æ•°æ®
                    await window.storage.set('eva-jan-routines', JSON.stringify(dailyRoutines));
                    await window.storage.set('eva-jan-tasks', JSON.stringify(weeklyTasks));
                    await window.storage.set('eva-jan-events', JSON.stringify(specialEvents));
                    
                    showToast('æ•°æ®å·²è‡ªåŠ¨ä¿å­˜ âœ“', 'success');
                } catch (error) {
                    console.error('Save failed:', error);
                    showToast('ä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
                }
            };

            useEffect(() => {
                if (!loading) {
                    const timer = setTimeout(() => {
                        saveData();
                    }, 500);
                    return () => clearTimeout(timer);
                }
            }, [dailyChecks, weeklyProgress, specialCompleted, notes, batteryLevel, dailyRoutines, weeklyTasks, specialEvents, loading]);

            const toggleDaily = (date, taskId) => {
                const key = `${date}-${taskId}`;
                setDailyChecks(prev => ({
                    ...prev,
                    [key]: !prev[key]
                }));
            };

            const toggleWeekly = (week, taskText) => {
                const key = `${week}-${taskText}`;
                setWeeklyProgress(prev => ({
                    ...prev,
                    [key]: !prev[key]
                }));
            };

            const toggleSpecial = (date, text) => {
                const key = `${date}-${text}`;
                setSpecialCompleted(prev => ({
                    ...prev,
                    [key]: !prev[key]
                }));
            };

            const updateNote = (date, note) => {
                setNotes(prev => ({
                    ...prev,
                    [date]: note
                }));
            };

            const addDailyRoutine = () => {
                if (!newTask.text.trim()) {
                    showToast('è¯·è¾“å…¥ä»»åŠ¡å†…å®¹', 'error');
                    return;
                }
                const newRoutine = {
                    id: `custom-${Date.now()}`,
                    text: newTask.text,
                    category: newTask.category
                };
                setDailyRoutines([...dailyRoutines, newRoutine]);
                setNewTask({ text: '', category: 'custom' });
                setShowAddTaskModal(false);
                showToast('ä»»åŠ¡å·²æ·»åŠ ï¼', 'success');
            };

            const removeDailyRoutine = (id) => {
                if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä»»åŠ¡å—ï¼Ÿ')) {
                    setDailyRoutines(dailyRoutines.filter(r => r.id !== id));
                    showToast('ä»»åŠ¡å·²åˆ é™¤', 'success');
                }
            };

            const addSpecialEvent = () => {
                if (!newEvent.text.trim()) {
                    showToast('è¯·è¾“å…¥äº‹é¡¹å†…å®¹', 'error');
                    return;
                }
                setSpecialEvents([...specialEvents, { ...newEvent }]);
                setNewEvent({ date: currentDate, text: '', category: 'custom', priority: false });
                setShowAddEventModal(false);
                showToast('äº‹é¡¹å·²æ·»åŠ ï¼', 'success');
            };

            const removeSpecialEvent = (date, text) => {
                if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªäº‹é¡¹å—ï¼Ÿ')) {
                    setSpecialEvents(specialEvents.filter(e => !(e.date === date && e.text === text)));
                    showToast('äº‹é¡¹å·²åˆ é™¤', 'success');
                }
            };

            const exportData = () => {
                const data = {
                    version: '1.0',
                    exportDate: new Date().toISOString(),
                    dailyChecks,
                    weeklyProgress,
                    specialCompleted,
                    notes,
                    batteryLevel,
                    dailyRoutines,
                    weeklyTasks,
                    specialEvents
                };
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `eva-checklist-backup-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                showToast('æ•°æ®å·²å¯¼å‡ºï¼', 'success');
            };

            const importData = (event) => {
                const file = event.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const data = JSON.parse(e.target.result);
                        if (confirm('å¯¼å…¥æ•°æ®å°†è¦†ç›–å½“å‰æ‰€æœ‰æ•°æ®ï¼Œç¡®å®šç»§ç»­å—ï¼Ÿ')) {
                            setDailyChecks(data.dailyChecks || {});
                            setWeeklyProgress(data.weeklyProgress || {});
                            setSpecialCompleted(data.specialCompleted || {});
                            setNotes(data.notes || {});
                            setBatteryLevel(data.batteryLevel || 60);
                            setDailyRoutines(data.dailyRoutines || DEFAULT_DAILY_ROUTINES);
                            setWeeklyTasks(data.weeklyTasks || DEFAULT_WEEKLY_TASKS);
                            setSpecialEvents(data.specialEvents || DEFAULT_SPECIAL_EVENTS);
                            showToast('æ•°æ®å¯¼å…¥æˆåŠŸï¼', 'success');
                            setShowImportExportModal(false);
                        }
                    } catch (error) {
                        showToast('å¯¼å…¥å¤±è´¥ï¼Œæ–‡ä»¶æ ¼å¼é”™è¯¯', 'error');
                    }
                };
                reader.readAsText(file);
            };

            const resetToDefault = () => {
                if (confirm('ç¡®å®šè¦é‡ç½®ä¸ºé»˜è®¤è®¾ç½®å—ï¼Ÿè¿™å°†åˆ é™¤æ‰€æœ‰è‡ªå®šä¹‰ä»»åŠ¡ï¼ˆä½†ä¿ç•™å®Œæˆè®°å½•å’Œç¬”è®°ï¼‰')) {
                    setDailyRoutines(DEFAULT_DAILY_ROUTINES);
                    setWeeklyTasks(DEFAULT_WEEKLY_TASKS);
                    setSpecialEvents(DEFAULT_SPECIAL_EVENTS);
                    showToast('å·²é‡ç½®ä¸ºé»˜è®¤è®¾ç½®', 'success');
                }
            };

            const getDailyProgress = (date) => {
                const completed = dailyRoutines.filter(task => 
                    dailyChecks[`${date}-${task.id}`]
                ).length;
                return dailyRoutines.length > 0 ? Math.round((completed / dailyRoutines.length) * 100) : 0;
            };

            const getTotalProgress = () => {
                let totalTasks = 0;
                let completedTasks = 0;

                for (let d = 1; d <= 31; d++) {
                    totalTasks += dailyRoutines.length;
                    completedTasks += dailyRoutines.filter(task => 
                        dailyChecks[`${d}-${task.id}`]
                    ).length;
                }

                DEFAULT_WEEKS.forEach(week => {
                    const weekTasks = weeklyTasks.filter(t => t.week === week.id || t.week === 'all');
                    totalTasks += weekTasks.length;
                    completedTasks += weekTasks.filter(task => 
                        weeklyProgress[`${week.id}-${task.text}`]
                    ).length;
                });

                totalTasks += specialEvents.length;
                completedTasks += specialEvents.filter(event => 
                    specialCompleted[`${event.date}-${event.text}`]
                ).length;

                return totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
            };

            const getCurrentWeek = (date) => {
                return DEFAULT_WEEKS.find(week => week.dates.includes(date));
            };

            const batteryColor = batteryLevel >= 60 ? 'bg-green-500' : 
                                batteryLevel >= 30 ? 'bg-yellow-500' : 'bg-red-500';

            const totalProgress = getTotalProgress();

            if (loading) {
                return (
                    <div className="flex items-center justify-center min-h-screen">
                        <div className="text-white text-2xl">åŠ è½½ä¸­...</div>
                    </div>
                );
            }

            return (
                <div className="max-w-6xl mx-auto">
                    {/* Header with Export/Import buttons */}
                    <div className="bg-white rounded-lg shadow-xl p-6 mb-6">
                        <div className="flex items-center justify-between mb-2">
                            <h1 className="text-3xl md:text-4xl font-bold text-gray-800">
                                âœ¨ Evaçš„1æœˆè¡ŒåŠ¨æ¸…å•
                            </h1>
                            <div className="flex gap-2">
                                <button
                                    onClick={() => setShowImportExportModal(true)}
                                    className="px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm"
                                >
                                    ğŸ’¾ å¤‡ä»½
                                </button>
                                <button
                                    onClick={saveData}
                                    className="px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm"
                                >
                                    ğŸ’¾ ä¿å­˜
                                </button>
                            </div>
                        </div>
                        <p className="text-gray-600 mb-4 text-sm">æ¢å¤ â†’ è§„åˆ’ â†’ å¯åŠ¨ â†’ æˆé•¿ | æ•°æ®è‡ªåŠ¨ä¿å­˜ä¸­...</p>
                        
                        {/* Progress Overview */}
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <div className="bg-gradient-to-r from-purple-100 to-pink-100 p-4 rounded-lg">
                                <div className="text-sm text-gray-600 mb-1">æ€»ä½“è¿›åº¦</div>
                                <div className="flex items-center gap-2">
                                    <div className="flex-1 bg-gray-200 rounded-full h-3">
                                        <div 
                                            className="bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full transition-all duration-500"
                                            style={{ width: `${totalProgress}%` }}
                                        ></div>
                                    </div>
                                    <span className="text-xl font-bold text-gray-800">{totalProgress}%</span>
                                </div>
                            </div>
                            
                            <div className="bg-gradient-to-r from-blue-100 to-cyan-100 p-4 rounded-lg">
                                <div className="text-sm text-gray-600 mb-1">ä»Šæ—¥è¿›åº¦</div>
                                <div className="flex items-center gap-2">
                                    <div className="flex-1 bg-gray-200 rounded-full h-3">
                                        <div 
                                            className="bg-gradient-to-r from-blue-500 to-cyan-500 h-3 rounded-full transition-all duration-500"
                                            style={{ width: `${getDailyProgress(currentDate)}%` }}
                                        ></div>
                                    </div>
                                    <span className="text-xl font-bold text-gray-800">{getDailyProgress(currentDate)}%</span>
                                </div>
                            </div>
                            
                            <div className="bg-gradient-to-r from-green-100 to-emerald-100 p-4 rounded-lg">
                                <div className="text-sm text-gray-600 mb-2">æƒ…ç»ªç”µæ± </div>
                                <div className="flex items-center gap-3">
                                    <div className="battery-indicator">
                                        <div 
                                            className={`battery-fill ${batteryColor}`}
                                            style={{ width: `${batteryLevel}%` }}
                                        ></div>
                                        <div className="battery-tip"></div>
                                    </div>
                                    <input
                                        type="range"
                                        min="0"
                                        max="100"
                                        value={batteryLevel}
                                        onChange={(e) => setBatteryLevel(Number(e.target.value))}
                                        className="w-20"
                                    />
                                    <span className="text-lg font-bold text-gray-800">{batteryLevel}%</span>
                                </div>
                            </div>
                        </div>

                        {/* Date Navigation */}
                        <div className="flex items-center justify-between mb-4">
                            <button
                                onClick={() => setCurrentDate(Math.max(1, currentDate - 1))}
                                className="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 disabled:opacity-50 text-sm"
                                disabled={currentDate === 1}
                            >
                                â† å‰ä¸€å¤©
                            </button>
                            
                            <div className="text-center">
                                <div className="text-2xl md:text-3xl font-bold text-gray-800">
                                    1æœˆ{currentDate}æ—¥
                                </div>
                                <div className="text-xs md:text-sm text-gray-600">
                                    {getCurrentWeek(currentDate)?.name}
                                </div>
                            </div>
                            
                            <button
                                onClick={() => setCurrentDate(Math.min(31, currentDate + 1))}
                                className="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 disabled:opacity-50 text-sm"
                                disabled={currentDate === 31}
                            >
                                åä¸€å¤© â†’
                            </button>
                        </div>

                        {/* Quick Date Selector */}
                        <div className="flex flex-wrap gap-2">
                            {Array.from({ length: 31 }, (_, i) => i + 1).map(date => {
                                const progress = getDailyProgress(date);
                                const isToday = date === new Date().getDate();
                                return (
                                    <button
                                        key={date}
                                        onClick={() => setCurrentDate(date)}
                                        className={`w-8 h-8 md:w-10 md:h-10 rounded-lg font-semibold transition-all text-sm ${
                                            currentDate === date
                                                ? 'bg-purple-600 text-white scale-110'
                                                : progress === 100
                                                ? 'bg-green-500 text-white'
                                                : progress > 0
                                                ? 'bg-yellow-200 text-gray-800'
                                                : 'bg-gray-200 text-gray-600'
                                        } ${isToday ? 'ring-2 ring-orange-400' : ''}`}
                                    >
                                        {date}
                                    </button>
                                );
                            })}
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        {/* Daily Routines */}
                        <div className="bg-white rounded-lg shadow-xl p-6 task-card">
                            <div className="flex items-center justify-between mb-4">
                                <h2 className="text-xl md:text-2xl font-bold text-gray-800 flex items-center gap-2">
                                    ğŸ“‹ æ¯æ—¥å¿…åš
                                    <span className="text-xs md:text-sm font-normal text-gray-500">
                                        ({dailyRoutines.filter(t => dailyChecks[`${currentDate}-${t.id}`]).length}/{dailyRoutines.length})
                                    </span>
                                </h2>
                                <button
                                    onClick={() => setShowAddTaskModal(true)}
                                    className="px-3 py-1 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-xs md:text-sm"
                                >
                                    + æ·»åŠ 
                                </button>
                            </div>
                            <div className="space-y-2 max-h-96 overflow-y-auto">
                                {dailyRoutines.map(task => {
                                    const isChecked = dailyChecks[`${currentDate}-${task.id}`];
                                    const isCustom = task.id.startsWith('custom-');
                                    return (
                                        <div key={task.id} className="flex items-center gap-2">
                                            <label
                                                className={`flex-1 flex items-center gap-3 p-2 md:p-3 rounded-lg cursor-pointer transition-all ${
                                                    isChecked ? 'bg-green-50' : 'bg-gray-50 hover:bg-gray-100'
                                                }`}
                                            >
                                                <input
                                                    type="checkbox"
                                                    checked={isChecked || false}
                                                    onChange={() => toggleDaily(currentDate, task.id)}
                                                    className="checkbox-custom"
                                                />
                                                <span className={`flex-1 text-sm ${isChecked ? 'line-through text-gray-500' : 'text-gray-700'}`}>
                                                    {task.text}
                                                </span>
                                            </label>
                                            {isCustom && (
                                                <button
                                                    onClick={() => removeDailyRoutine(task.id)}
                                                    className="px-2 py-1 text-red-500 hover:bg-red-50 rounded text-sm"
                                                >
                                                    âœ•
                                                </button>
                                            )}
                                        </div>
                                    );
                                })}
                            </div>
                        </div>

                        {/* Special Events + Notes */}
                        <div className="bg-white rounded-lg shadow-xl p-6 task-card">
                            <div className="flex items-center justify-between mb-4">
                                <h2 className="text-xl md:text-2xl font-bold text-gray-800">ğŸ¯ ä»Šæ—¥ç‰¹æ®Šäº‹é¡¹</h2>
                                <button
                                    onClick={() => {
                                        setNewEvent({ ...newEvent, date: currentDate });
                                        setShowAddEventModal(true);
                                    }}
                                    className="px-3 py-1 bg-orange-500 text-white rounded-lg hover:bg-orange-600 text-xs md:text-sm"
                                >
                                    + æ·»åŠ 
                                </button>
                            </div>
                            {specialEvents.filter(e => e.date === currentDate).length > 0 ? (
                                <div className="space-y-2 mb-4 max-h-48 overflow-y-auto">
                                    {specialEvents.filter(e => e.date === currentDate).map((event, idx) => {
                                        const isChecked = specialCompleted[`${event.date}-${event.text}`];
                                        const isCustom = event.category === 'custom';
                                        return (
                                            <div key={idx} className="flex items-center gap-2">
                                                <label
                                                    className={`flex-1 flex items-center gap-3 p-2 md:p-3 rounded-lg cursor-pointer transition-all ${
                                                        isChecked ? 'bg-green-50' : 
                                                        event.priority ? 'bg-orange-50 hover:bg-orange-100' : 'bg-gray-50 hover:bg-gray-100'
                                                    }`}
                                                >
                                                    <input
                                                        type="checkbox"
                                                        checked={isChecked || false}
                                                        onChange={() => toggleSpecial(event.date, event.text)}
                                                        className="checkbox-custom"
                                                    />
                                                    <span className={`flex-1 text-sm ${isChecked ? 'line-through text-gray-500' : 'text-gray-700'}`}>
                                                        {event.text}
                                                        {event.priority && <span className="ml-2 text-red-500">â­</span>}
                                                    </span>
                                                </label>
                                                {isCustom && (
                                                    <button
                                                        onClick={() => removeSpecialEvent(event.date, event.text)}
                                                        className="px-2 py-1 text-red-500 hover:bg-red-50 rounded text-sm"
                                                    >
                                                        âœ•
                                                    </button>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>
                            ) : (
                                <div className="text-center py-6 text-gray-400 mb-4">
                                    <div className="text-3xl mb-1">ğŸŒŸ</div>
                                    <div className="text-sm">ä»Šå¤©æ²¡æœ‰ç‰¹æ®Šäº‹é¡¹</div>
                                </div>
                            )}

                            {/* Daily Notes */}
                            <div>
                                <h3 className="text-base md:text-lg font-semibold text-gray-700 mb-2">ğŸ“ ä»Šæ—¥ç¬”è®°</h3>
                                <textarea
                                    value={notes[currentDate] || ''}
                                    onChange={(e) => updateNote(currentDate, e.target.value)}
                                    placeholder="è®°å½•ä»Šå¤©çš„æ„Ÿå—ã€æˆå°±ã€æˆ–éœ€è¦æ”¹è¿›çš„åœ°æ–¹..."
                                    className="w-full p-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none text-sm"
                                    rows="4"
                                />
                            </div>
                        </div>

                        {/* Weekly Goals */}
                        <div className="bg-white rounded-lg shadow-xl p-6 task-card lg:col-span-2">
                            <h2 className="text-xl md:text-2xl font-bold text-gray-800 mb-4">ğŸ¯ æœ¬å‘¨ç›®æ ‡</h2>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                {DEFAULT_WEEKS.map(week => {
                                    if (!week.dates.includes(currentDate)) return null;
                                    
                                    const weekTasks = weeklyTasks.filter(t => t.week === week.id || t.week === 'all');
                                    const completed = weekTasks.filter(task => 
                                        weeklyProgress[`${week.id}-${task.text}`]
                                    ).length;

                                    return (
                                        <div key={week.id} className="space-y-3">
                                            <div className="flex items-center justify-between mb-2">
                                                <h3 className="font-semibold text-gray-700 text-sm md:text-base">{week.name.split(':')[0]}</h3>
                                                <span className="text-xs md:text-sm text-gray-500">
                                                    {completed}/{weekTasks.length}
                                                </span>
                                            </div>
                                            <div className="flex gap-2 mb-3 flex-wrap">
                                                {week.focus.map((f, idx) => (
                                                    <span key={idx} className="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full">
                                                        {f}
                                                    </span>
                                                ))}
                                            </div>
                                            <div className="space-y-2">
                                                {weekTasks.map((task, idx) => {
                                                    const isChecked = weeklyProgress[`${week.id}-${task.text}`];
                                                    return (
                                                        <label
                                                            key={idx}
                                                            className={`flex items-center gap-3 p-2 rounded-lg cursor-pointer transition-all ${
                                                                isChecked ? 'bg-green-50' : 'bg-gray-50 hover:bg-gray-100'
                                                            }`}
                                                        >
                                                            <input
                                                                type="checkbox"
                                                                checked={isChecked || false}
                                                                onChange={() => toggleWeekly(week.id, task.text)}
                                                                className="checkbox-custom"
                                                            />
                                                            <span className={`text-xs md:text-sm flex-1 ${isChecked ? 'line-through text-gray-500' : 'text-gray-700'}`}>
                                                                {task.text}
                                                            </span>
                                                        </label>
                                                    );
                                                })}
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>

                        {/* Month Overview */}
                        <div className="bg-white rounded-lg shadow-xl p-6 task-card lg:col-span-2">
                            <h2 className="text-xl md:text-2xl font-bold text-gray-800 mb-4">ğŸ“… æœ¬æœˆé‡Œç¨‹ç¢‘æ€»è§ˆ</h2>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
                                {specialEvents.filter(e => e.priority).map((event, idx) => {
                                    const isChecked = specialCompleted[`${event.date}-${event.text}`];
                                    const isPast = event.date < currentDate;
                                    const isToday = event.date === currentDate;
                                    
                                    return (
                                        <div
                                            key={idx}
                                            className={`p-3 md:p-4 rounded-lg border-2 transition-all ${
                                                isChecked ? 'bg-green-50 border-green-500' :
                                                isToday ? 'bg-orange-50 border-orange-500' :
                                                isPast ? 'bg-red-50 border-red-300' :
                                                'bg-gray-50 border-gray-200'
                                            }`}
                                        >
                                            <div className="flex items-start justify-between mb-2">
                                                <span className="text-xs md:text-sm font-semibold text-gray-600">1æœˆ{event.date}æ—¥</span>
                                                {isChecked && <span className="text-green-500">âœ“</span>}
                                                {!isChecked && isPast && <span className="text-red-500">!</span>}
                                            </div>
                                            <div className="text-xs md:text-sm text-gray-700">{event.text}</div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    </div>

                    {/* Footer Tips */}
                    <div className="mt-6 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 md:p-6 text-center">
                        <p className="text-sm md:text-base text-gray-700 mb-2">
                            ğŸ’¡ <strong>è®°ä½ï¼š</strong> è¿™ä¸ªchecklistæ˜¯å¸®åŠ©ä½ ï¼Œä¸æ˜¯çº¦æŸä½ 
                        </p>
                        <p className="text-xs md:text-sm text-gray-600">
                            å¦‚æœç”µæ±  &lt; 30%ï¼Œä¼˜å…ˆä¼‘æ¯ã€‚"And thinking" - æˆ‘å¯ä»¥æœ‰è®¡åˆ’ AND ä¿æŒçµæ´» âœ¨
                        </p>
                    </div>

                    {/* Add Task Modal */}
                    <div className={`modal ${showAddTaskModal ? 'active' : ''}`} onClick={() => setShowAddTaskModal(false)}>
                        <div className="bg-white rounded-lg p-6 max-w-md w-full mx-4" onClick={(e) => e.stopPropagation()}>
                            <h3 className="text-xl md:text-2xl font-bold mb-4">æ·»åŠ æ¯æ—¥ä»»åŠ¡</h3>
                            <input
                                type="text"
                                value={newTask.text}
                                onChange={(e) => setNewTask({ ...newTask, text: e.target.value })}
                                placeholder="ä¾‹å¦‚ï¼šğŸ¨ ç”»ç”»30åˆ†é’Ÿ"
                                className="w-full p-3 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm"
                            />
                            <div className="flex gap-2">
                                <button
                                    onClick={addDailyRoutine}
                                    className="flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm"
                                >
                                    æ·»åŠ 
                                </button>
                                <button
                                    onClick={() => setShowAddTaskModal(false)}
                                    className="flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 text-sm"
                                >
                                    å–æ¶ˆ
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* Add Event Modal */}
                    <div className={`modal ${showAddEventModal ? 'active' : ''}`} onClick={() => setShowAddEventModal(false)}>
                        <div className="bg-white rounded-lg p-6 max-w-md w-full mx-4" onClick={(e) => e.stopPropagation()}>
                            <h3 className="text-xl md:text-2xl font-bold mb-4">æ·»åŠ ç‰¹æ®Šäº‹é¡¹</h3>
                            <div className="mb-4">
                                <label className="block text-sm font-medium text-gray-700 mb-2">æ—¥æœŸ</label>
                                <input
                                    type="number"
                                    min="1"
                                    max="31"
                                    value={newEvent.date}
                                    onChange={(e) => setNewEvent({ ...newEvent, date: Number(e.target.value) })}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-sm"
                                />
                            </div>
                            <div className="mb-4">
                                <label className="block text-sm font-medium text-gray-700 mb-2">äº‹é¡¹å†…å®¹</label>
                                <input
                                    type="text"
                                    value={newEvent.text}
                                    onChange={(e) => setNewEvent({ ...newEvent, text: e.target.value })}
                                    placeholder="ä¾‹å¦‚ï¼šğŸ“ å’ŒDanielè®¨è®ºç ”ç©¶æ–¹å‘"
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-sm"
                                />
                            </div>
                            <div className="mb-4">
                                <label className="flex items-center gap-2">
                                    <input
                                        type="checkbox"
                                        checked={newEvent.priority}
                                        onChange={(e) => setNewEvent({ ...newEvent, priority: e.target.checked })}
                                        className="checkbox-custom"
                                    />
                                    <span className="text-sm text-gray-700">æ ‡è®°ä¸ºé‡è¦äº‹é¡¹ â­</span>
                                </label>
                            </div>
                            <div className="flex gap-2">
                                <button
                                    onClick={addSpecialEvent}
                                    className="flex-1 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 text-sm"
                                >
                                    æ·»åŠ 
                                </button>
                                <button
                                    onClick={() => setShowAddEventModal(false)}
                                    className="flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 text-sm"
                                >
                                    å–æ¶ˆ
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* Import/Export Modal */}
                    <div className={`modal ${showImportExportModal ? 'active' : ''}`} onClick={() => setShowImportExportModal(false)}>
                        <div className="bg-white rounded-lg p-6 max-w-md w-full mx-4" onClick={(e) => e.stopPropagation()}>
                            <h3 className="text-xl md:text-2xl font-bold mb-4">æ•°æ®å¤‡ä»½ä¸å¯¼å…¥</h3>
                            
                            <div className="space-y-3 mb-4">
                                <button
                                    onClick={exportData}
                                    className="w-full px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-left flex items-center gap-3"
                                >
                                    <span className="text-2xl">ğŸ’¾</span>
                                    <div className="text-sm">
                                        <div className="font-semibold">å¯¼å‡ºæ•°æ®</div>
                                        <div className="text-xs opacity-80">ä¸‹è½½å¤‡ä»½æ–‡ä»¶åˆ°æœ¬åœ°</div>
                                    </div>
                                </button>
                                
                                <label className="w-full px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 cursor-pointer block">
                                    <div className="flex items-center gap-3">
                                        <span className="text-2xl">ğŸ“‚</span>
                                        <div className="text-sm">
                                            <div className="font-semibold">å¯¼å…¥æ•°æ®</div>
                                            <div className="text-xs opacity-80">ä»å¤‡ä»½æ–‡ä»¶æ¢å¤</div>
                                        </div>
                                    </div>
                                    <input
                                        type="file"
                                        accept=".json"
                                        onChange={importData}
                                        className="hidden"
                                    />
                                </label>
                                
                                <button
                                    onClick={resetToDefault}
                                    className="w-full px-4 py-3 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 text-left flex items-center gap-3"
                                >
                                    <span className="text-2xl">ğŸ”„</span>
                                    <div className="text-sm">
                                        <div className="font-semibold">é‡ç½®ä¸ºé»˜è®¤</div>
                                        <div className="text-xs opacity-80">åˆ é™¤è‡ªå®šä¹‰ä»»åŠ¡ï¼Œä¿ç•™è®°å½•</div>
                                    </div>
                                </button>
                            </div>

                            <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                                <p className="text-xs md:text-sm text-blue-800">
                                    <strong>ğŸ’¡ æç¤ºï¼š</strong>å®šæœŸå¯¼å‡ºå¤‡ä»½ï¼Œå¯ä»¥ï¼š<br/>
                                    â€¢ åœ¨ä¸åŒæµè§ˆå™¨é—´åŒæ­¥æ•°æ®<br/>
                                    â€¢ é˜²æ­¢æ•°æ®ä¸¢å¤±<br/>
                                    â€¢ åˆ†äº«ç»™StarkæŸ¥çœ‹ä½ çš„è¿›åº¦
                                </p>
                            </div>
                            
                            <button
                                onClick={() => setShowImportExportModal(false)}
                                className="w-full px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 text-sm"
                            >
                                å…³é—­
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>